<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Flow | Starting a new Flow project</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/default.css">
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/syntax.css">
    <link rel='shortcut icon' href='/flowtype/static/favicon.png'>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="Starting a new Flow project" />
    <meta property="og:site_name" content="flowtype">
    <meta property='og:description' content='Flow is a static type checker for
    JavaScript.'>
    <meta property='og:image' content='http://flowtype.org/static/flow-og-image.png'>
    <meta property='og:url' content="http://flowtype.org/docs/new-project.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="/flowtype/assets/prelude.js"></script>
    <link rel="alternate" type="application/rss+xml" title="Flow" href="http://flowtype.org/blog/feed.xml">
</head>
<body class="">

<header class='topbar'><nav class='width'>
<a href='/flowtype/'>
  <img src="/flowtype/assets/flow-logo.png" alt="Flow logo" class="logo" />
</a>
    <ul>
      <li><a href="/flowtype/docs/getting-started.html#_"
           class="active" >
          文档
      </a></li>
      <li><a href="/flowtype/try/"
          >
          试试
      </a></li>
      <li><a href="/flowtype/support.html"
          >
          支持
      </a></li>
      <li><a href="/flowtype/blog"
          >
          博客
      </a></li>
      <li>
        <input id="algolia-doc-search" type="text" placeholder="Search docs..." />
      </li>
    </ul>
    <ul class="external">
      <li><a href="http://github.com/facebook/flow">官方GitHub</a>
      <li><a href="http://github.com/zhenyong">译者GitHub</a>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/getting-started.html#_">
              Flow 起步
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/five-simple-examples.html#_">
              五个简单例子
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>User Guide</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/new-project.html#_" class="active">
              Starting a new Flow project
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/existing.html#_">
              Running Flow on existing code
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-annotations.html#_">
              Adding Type Annotations
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/third-party.html#_">
              Checking third-party code
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/running.html#_">
              Running Flow code
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/troubleshooting.html#_">
              Troubleshooting
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/cli.html#_">
              Using the CLI
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/advanced-configuration.html#_">
              Advanced Configuration
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Language Reference</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/quick-reference.html#_">
              Quick Reference
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/builtins.html#_">
              Built-in Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/syntax.html#_">
              Syntax
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/arrays.html#_">
              Arrays and Tuples
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/classes.html#_">
              Classes
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/objects.html#_">
              Objects
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/functions.html#_">
              Functions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/nullable-types.html#_">
              Maybe Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/destructuring.html#_">
              Destructuring
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-aliases.html#_">
              Type Aliases
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/union-intersection-types.html#_">
              Union and Intersection Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/typeof.html#_">
              Typeof types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/dynamic-type-tests.html#_">
              Dynamic Type Tests
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/disjoint-unions.html#_">
              Disjoint Unions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/modules.html#_">
              Modules
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/declarations.html#_">
              Declarations
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/react.html#_">
              React
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>Starting a new Flow project</h1>
    <p></p>

    <p>One of the most powerful ways to use Flow is to have it checking your code from the first line you write. This allows you to ensure type safety from the very beginning and reduce the likelihood of errors, even while prototyping.</p>

<h2>Setting up your project<a id="setting-up-your-project" class="hashref"></a><a href="#setting-up-your-project" class="hash">#</a></h2>

<p>To set up a new project using Flow, all you need to do is initialize the root of the folder to tell Flow to start typechecking files within your project:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>mkdir new_project
<span class="gp">$&gt; </span><span class="nb">cd </span>new_project
<span class="gp">$&gt; </span>flow init
</code></pre>
</div>

<p>All this actually does is create a hidden file <code class="highlighter-rouge">.flowconfig</code> at the root of the folder. You might have noticed that this file was already present in each of the examples we looked at earlier.</p>

<p>Once the <code class="highlighter-rouge">.flowconfig</code> file is present, you can run ad-hoc checks on the code within it and its subfolders:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow check
</code></pre>
</div>

<p>Although this works, it is <strong>not the most efficient</strong> way to use Flow. This command causes flow to re-check the entire project’s file structure every time. Instead, we recommend you use the flow server:</p>

<h2>Using the Flow server<a id="using-the-flow-server" class="hashref"></a><a href="#using-the-flow-server" class="hash">#</a></h2>

<p>For a large project, you probably only want Flow to recheck files incrementally when they change. Flow uses a client/server architecture which allows you to start a Flow server that will run in the background and type check files as they change. To do this simply run:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow   <span class="c"># This starts a server and prints the initial type check results</span>
</code></pre>
</div>

<p>You can then check the status of the server again later with the same command:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow   <span class="c"># Connect to the running server and print the type check results</span>
</code></pre>
</div>

<p>And once you’ve changed some files, you can quickly run it again to see the current state of the type check results:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow   <span class="c"># Connect to server (or start one) and print type check results</span>
</code></pre>
</div>

<p>Using the <code class="highlighter-rouge">flow</code> command with a running server reduces the overhead of having to re-check all files in the project each time you make a change. This allows for a much faster incremental workflow - not to mention a better integration with IDEs and other tools.</p>

<p>When you’ve finished working on your code, you can shutdown the server:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow stop
</code></pre>
</div>

<h2>Typechecking your files<a id="typechecking-your-files" class="hashref"></a><a href="#typechecking-your-files" class="hash">#</a></h2>

<p>As with all the examples in the Flow tutorial, you need to add</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="cm">/* @flow */</span>
</code></pre>
</div>

<p>to the top of each file you’d like Flow to typecheck. You don’t have to do this for all files at once, since Flow will just ignore files that do not have this comment. This allows you to convert your project progressively, one file at a time, and get the benefit of typing gradually. No need to convert your whole project at once.</p>

<p>It is possible to indicate on the command line that you would like Flow to check all JavaScript files, regardless of whether they have the <code class="highlighter-rouge">/* @flow */</code> declaration at the top. To do this, use the <code class="highlighter-rouge">--all</code> flag:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$&gt; </span>flow check --all
</code></pre>
</div>

<p>However, use this command cautiously, particularly if you are running Flow against a large existing project or a project with many large third party frameworks or test suites. The chances are that the checker will find a <em>lot</em> of errors or hazards, and it can be a little overwhelming!</p>

<p>A more valuable approach to converting an existing project is to incrementally check - and fix - the project one file at a time. When you’re ready to convert a file, simply add the <code class="highlighter-rouge">/* @flow */</code> declaration at the top of the file and run the <code class="highlighter-rouge">flow</code> command to see if any errors were discovered.</p>

<p>Read more about testing existing libraries or code in the <a href="existing.html">Running Flow on existing code</a> section of this guide.</p>

<h2>Common Issues<a id="common-issues" class="hashref"></a><a href="#common-issues" class="hash">#</a></h2>

<p>As Flow starts to typecheck your files you may run into type errors. Check out the <a href="troubleshooting.html">Troubleshooting</a> section for common errors and how to resolve them. Your goal is to get the number of errors down to zero as fast as possible so you can continue on with your development.</p>

<p>In some cases, errors may be due to inherent imprecision of the analysis - which means Flow won’t always get it right and could give errors that are false positives. In those cases you can either try to refactor your code to help Flow understand it, or you can use the <a href="base-types.html#any"><code class="highlighter-rouge">any</code></a> type to tell Flow about values that should not be checked.</p>


    <p class="docs-prevnext">
      
        <a href="/flowtype/docs/five-simple-examples.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/flowtype/docs/existing.html#_">Next &rarr;</a>
      
    </p>

    <p class="edit-page-block">
      You can
      <a href="https://github.com/facebook/flow/tree/master/website/docs/02-new-project.md" target="_blank">
        edit this page on GitHub
      </a>
      and send us a pull request!
    </p>

    <a id="_"></a>
</article>

</div></section>

<footer><div class='width'>
    &copy; Copyright 2014 - 2016, Facebook Inc.
</div></footer>

<script>require(['default']);</script>
</body>
</html>

