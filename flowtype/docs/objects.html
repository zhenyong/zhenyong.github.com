<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Flow | Objects</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/default.css">
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/syntax.css">
    <link rel='shortcut icon' href='/flowtype/static/favicon.png'>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="Objects" />
    <meta property="og:site_name" content="flowtype">
    <meta property='og:description' content='Flow is a static type checker for
    JavaScript.'>
    <meta property='og:image' content='http://flowtype.org/static/flow-og-image.png'>
    <meta property='og:url' content="http://flowtype.org/docs/objects.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="/flowtype/assets/prelude.js"></script>
    <link rel="alternate" type="application/rss+xml" title="Flow" href="http://flowtype.org/blog/feed.xml">
</head>
<body class="">

<header class='topbar'><nav class='width'>
<a href='/flowtype/'>
  <img src="/flowtype/assets/flow-logo.png" alt="Flow logo" class="logo" />
</a>
    <ul>
      <li><a href="/flowtype/docs/getting-started.html#_"
           class="active" >
          文档
      </a></li>
      <li><a href="/flowtype/try/"
          >
          试试
      </a></li>
      <li><a href="/flowtype/support.html"
          >
          支持
      </a></li>
      <li><a href="/flowtype/blog"
          >
          博客
      </a></li>
      <li>
        <input id="algolia-doc-search" type="text" placeholder="Search docs..." />
      </li>
    </ul>
    <ul class="external">
      <li><a href="http://github.com/facebook/flow">官方GitHub</a>
      <li><a href="http://github.com/zhenyong">译者GitHub</a>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/getting-started.html#_">
              Flow 起步
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/five-simple-examples.html#_">
              五个简单例子
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>使用指南</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/new-project.html#_">
              开始一个新的 Flow 项目
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/existing.html#_">
              在已有的代码上跑 Flow
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-annotations.html#_">
              Adding 类型注解
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/third-party.html#_">
              检测第三方模块调用代码
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/running.html#_">
              Running Flow code
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/troubleshooting.html#_">
              Troubleshooting
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/cli.html#_">
              Using the CLI
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/advanced-configuration.html#_">
              Advanced Configuration
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Language Reference</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/quick-reference.html#_">
              Quick Reference
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/builtins.html#_">
              Built-in Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/syntax.html#_">
              Syntax
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/arrays.html#_">
              Arrays and Tuples
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/classes.html#_">
              Classes
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/objects.html#_" class="active">
              Objects
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/functions.html#_">
              Functions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/nullable-types.html#_">
              Maybe Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/destructuring.html#_">
              Destructuring
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-aliases.html#_">
              Type Aliases
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/union-intersection-types.html#_">
              Union and Intersection Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/typeof.html#_">
              Typeof types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/dynamic-type-tests.html#_">
              Dynamic Type Tests
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/disjoint-unions.html#_">
              Disjoint Unions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/modules.html#_">
              Modules
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/declarations.html#_">
              Declarations
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/react.html#_">
              React
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>Objects</h1>
    <p></p>

    
<p>Objects can be created with object literals. The types of properties are fixed
based on their initializers.</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6</pre>
        </td>
        <td class="code"><pre><span class="comment line">// @flow</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">o</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_IDENTIFIER">x</span><span class="normal T_COLON">:</span> <span class="error" data-error-id="E1" data-message-id="M1003"><span class="normal T_NUMBER">42</span></span><span class="normal T_COMMA">,</span>
  <span class="normal T_IDENTIFIER">foo</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_THIS">this</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">x</span> <span class="normal T_ASSIGN">=</span> <span class="error" data-error-id="E1" data-message-id="M1001"><span class="normal T_IDENTIFIER">x</span></span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span>
<span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">o</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&#39;hello&#39;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>6: <strong>o.foo(&#39;hello&#39;)</strong>;
   ^^^^^^^^^^^^^^ call of method `foo`
4:   foo(x) { this.x = <strong>x</strong>; }
                       ^ string. This type is incompatible with
3:   x: <strong>42</strong>,
        ^^ number</code></pre>
</div>


</div>

<p>Flow infers the type of property <code class="highlighter-rouge">x</code> of the object to be number since it is
initialized with a <code class="highlighter-rouge">number</code>. The method call <code class="highlighter-rouge">foo()</code> on the object writes
<code class="highlighter-rouge">string</code> to that property. As expected, running Flow produces an error.</p>

<h2>Object Types<a id="object-types" class="hashref"></a><a href="#object-types" class="hash">#</a></h2>

<p>Object types are of the form:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span> <span class="nl">x1</span><span class="p">:</span> <span class="nx">T1</span><span class="p">;</span> <span class="nl">x2</span><span class="p">:</span> <span class="nx">T2</span><span class="p">;</span> <span class="nl">x3</span><span class="p">:</span> <span class="nx">T3</span><span class="p">;}</span>
</code></pre>
</div>

<p>Here is an example of declaring an object type:</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="comment line">// @flow</span>
<span class="normal T_CLASS">class</span> <span class="normal T_IDENTIFIER">Foo</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">obj</span><span class="type T_COLON">:</span> <span class="type T_LCURLY">{</span><span class="normal T_IDENTIFIER">a</span><span class="type T_COLON">:</span> <span class="type T_BOOLEAN_TYPE">boolean</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">b</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">c</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Foo</span><span class="type T_RCURLY">}</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COLON">:</span> <span class="normal T_TRUE">true</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;Hi&quot;</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">c</span><span class="normal T_COLON">:</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">Foo</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_RCURLY">}</span></code></pre>
</div>

<p>Here is an example of Flow catching a problem with your object type:</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3</pre>
        </td>
        <td class="code"><pre><span class="comment line">// @flow</span>
<span class="normal T_CLASS">class</span> <span class="normal T_IDENTIFIER">Bar</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">badObj</span><span class="type T_COLON">:</span> <span class="type T_LCURLY">{</span><span class="normal T_IDENTIFIER">a</span><span class="type T_COLON">:</span> <span class="type T_BOOLEAN_TYPE">boolean</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">b</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">c</span><span class="type T_COLON">:</span> <span class="error" data-error-id="E2" data-message-id="M2003"><span class="type T_IDENTIFIER">Foo</span></span><span class="type T_RCURLY">}</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COLON">:</span> <span class="normal T_TRUE">true</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;Hi&quot;</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">c</span><span class="normal T_COLON">:</span> <span class="normal T_NEW">new</span> <span class="error" data-error-id="E2" data-message-id="M2001"><span class="normal T_IDENTIFIER">Bar</span></span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_RCURLY">}</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>3: var badObj: {a: boolean; b: string; c: Foo} = {a: true, b: &quot;Hi&quot;, c: new <strong>Bar</strong>()}
                                                                           ^^^ Bar. This type is incompatible with
3: var badObj: {a: boolean; b: string; c: <strong>Foo</strong>} = {a: true, b: &quot;Hi&quot;, c: new Bar()}
                                          ^^^ Foo</code></pre>
</div>


</div>

<h2>Reusable Object Types<a id="reusable-object-types" class="hashref"></a><a href="#reusable-object-types" class="hash">#</a></h2>

<p>Object types can be made reusable through the use of
<a href="type-aliases.html">type aliases</a>:</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="comment line">// @flow</span>
<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">MyType</span> <span class="type T_ASSIGN">=</span> <span class="type T_LCURLY">{</span><span class="normal T_IDENTIFIER">message</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">isAwesome</span><span class="type T_COLON">:</span> <span class="type T_BOOLEAN_TYPE">boolean</span><span class="type T_RCURLY">}</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">sayHello</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">data</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">MyType</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_IDENTIFIER">console</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">log</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">data</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">message</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span>

<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">mySampleData</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">MyType</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">message</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&#39;Hello World&#39;</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">isAwesome</span><span class="normal T_COLON">:</span> <span class="normal T_TRUE">true</span><span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">sayHello</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">mySampleData</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">sayHello</span><span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">message</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&#39;Hi&#39;</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">isAwesome</span><span class="normal T_COLON">:</span> <span class="normal T_FALSE">false</span><span class="normal T_RCURLY">}</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>Object types can be added together with the intersection operator, <code class="highlighter-rouge">&amp;</code>. See
<a href="http://flowtype.org/docs/union-intersection-types.html#_">union and intersection types</a>
for details.</p>

<h2>Optional properties<a id="optional-properties" class="hashref"></a><a href="#optional-properties" class="hash">#</a></h2>

<p>Object types can have optional properties. The following code shows how
optional properties allow objects with missing properties to be typed.</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="comment line">// @flow</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">optObj</span><span class="type T_COLON">:</span> <span class="type T_LCURLY">{</span> <span class="normal T_IDENTIFIER">a</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_SEMICOLON">;</span> <span class="normal T_IDENTIFIER">b</span><span class="type T_PLING">?</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span> <span class="type T_RCURLY">}</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span> <span class="normal T_IDENTIFIER">a</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;hello&quot;</span> <span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>When optional properties are accessed, Flow tracks the fact that they could
be <code class="highlighter-rouge">undefined</code>, and reports errors when they are used as is.</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1</pre>
        </td>
        <td class="code"><pre><span class="error" data-error-id="E3" data-message-id="M3003"><span class="error" data-error-id="E3" data-message-id="M3001"><span class="normal T_IDENTIFIER">optObj</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">b</span></span> <span class="normal T_MULT">*</span> <span class="normal T_NUMBER">10</span></span> <span class="comment line">// error: undefined is incompatible with number</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: <strong>optObj.b</strong> * 10 // error: undefined is incompatible with number
   ^^^^^^^^ undefined. This type is incompatible with
1: <strong>optObj.b * 10</strong> // error: undefined is incompatible with number
   ^^^^^^^^^^^^^ number</code></pre>
</div>


</div>

<p>One way to avoid errors is to dynamically check that an optional property exists
before using it. See <a href="http://flowtype.org/docs/nullable-types.html#_">nullable types</a> for details.</p>

<h2>Constructor Functions and Prototype Objects<a id="constructor-functions-and-prototype-objects" class="hashref"></a><a href="#constructor-functions-and-prototype-objects" class="hash">#</a></h2>

<p>Another way of creating objects in JavaScript is by using <code class="highlighter-rouge">new</code> on
constructor functions. A constructor function is typically an open method
that “initializes” some properties of <code class="highlighter-rouge">this</code>; and a <code class="highlighter-rouge">new</code> operation on such a
function calls it on a freshly created object before returning it.</p>

<p>Additionally, a constructor function may set various properties on its
<code class="highlighter-rouge">prototype</code> object. These properties are typically methods, and are inherited
by all objects created from that constructor function by a process known as
prototype chaining.</p>
<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6</pre>
        </td>
        <td class="code"><pre><span class="comment line">// @flow</span>
<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">FuncBasedClass</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_THIS">this</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">x</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_IDENTIFIER">x</span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">FuncBasedClass</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">prototype</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">f</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_FUNCTION">function</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_RETURN">return</span> <span class="normal T_THIS">this</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span>

<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">y</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">FuncBasedClass</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">42</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">z</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_IDENTIFIER">y</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">f</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>

<p>In this code, a <code class="highlighter-rouge">new</code> object is created by <code class="highlighter-rouge">new FuncBasedClass(42)</code>; this object
has a property <code class="highlighter-rouge">x</code> initialized by <code class="highlighter-rouge">FuncBasedClass</code> with the <code class="highlighter-rouge">number</code> passed to it.
The object also responds to the <code class="highlighter-rouge">f</code> method defined in <code class="highlighter-rouge">FuncBasedClass.prototype</code>,
so <code class="highlighter-rouge">y.f()</code> reads <code class="highlighter-rouge">y.x</code> and returns it. This fits with the expectation of a <code class="highlighter-rouge">number</code> as
expressed by the annotation at line 6, so this code typechecks.</p>

<p>Furthermore, Flow ensures that an object’s type can always be viewed as a
subtype of its constructor’s <code class="highlighter-rouge">prototype type</code>. (This is analogous to subtyping
based on class inheritance.) This means that the following code typechecks:</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">anObj</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">FuncBasedClass</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">FuncBasedClass</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">42</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<h2>Adding properties<a id="adding-properties" class="hashref"></a><a href="#adding-properties" class="hash">#</a></h2>

<p>It is a common idiom in JavaScript to add properties to objects after they are
created. In fact, we have already seen this idiom on several occasions above:
when initializing properties of <code class="highlighter-rouge">this</code> properties in a constructor function;
when building a constructor function’s <code class="highlighter-rouge">prototype</code> object; when building a
<code class="highlighter-rouge">module.exports</code> object; and so on.</p>

<p>Flow supports this idiom. As far as we know, this is a type system novelty:
supporting this idiom while balancing other constraints of the type system,
such as sound subtyping over objects and prototypes, can be quite tricky!</p>

<p>However, for a property that may be added to an object after its creation,
Flow cannot guarantee the existence of that property at a particular property
access operation; it can only check that its writes and reads are type-
consistent. Providing such guarantees for dynamic objects would significantly
complicate the analysis; this is a well-known fact (in technical terms, Flow’s
analysis is heap-insensitive for strong updates).</p>

<p>For example, the following code typechecks:</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="comment line">// @flow</span>
<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">foo</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">p</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_IDENTIFIER">p</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">x</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_NUMBER">42</span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span>
<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">bar</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">q</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_RETURN">return</span> <span class="normal T_IDENTIFIER">q</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">f</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span>

<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">o</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span> <span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">o</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">f</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_FUNCTION">function</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span> <span class="normal T_RETURN">return</span> <span class="normal T_THIS">this</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_SEMICOLON">;</span> <span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span>

<span class="normal T_IDENTIFIER">bar</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">o</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">foo</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">o</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>In this code, when <code class="highlighter-rouge">bar(o)</code> is called, <code class="highlighter-rouge">o.x</code> is undefined; only later is it
initialized by <code class="highlighter-rouge">foo(o)</code>, but it is hard to track this fact statically.</p>

<p>Fortunately, though, the following code does not typecheck:</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1</pre>
        </td>
        <td class="code"><pre><span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">test</span><span class="type T_COLON">:</span> <span class="error" data-error-id="E4" data-message-id="M4003"><span class="type T_STRING_TYPE">string</span></span> <span class="normal T_ASSIGN">=</span> <span class="error" data-error-id="E4" data-message-id="M4001"><span class="normal T_IDENTIFIER">bar</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">o</span><span class="normal T_RPAREN">)</span></span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: var test: string = <strong>bar(o)</strong>;
                      ^^^^^^ number. This type is incompatible with
1: var test: <strong>string</strong> = bar(o);
             ^^^^^^ string</code></pre>
</div>


</div>

<p>In other words, Flow knows enough to infer that whenever the <code class="highlighter-rouge">x</code> property of
<code class="highlighter-rouge">o</code> does exist, it is a number, so a <code class="highlighter-rouge">string</code> should not be expected.</p>

<h2>Sealed object types<a id="sealed-object-types" class="hashref"></a><a href="#sealed-object-types" class="hash">#</a></h2>

<p>Unfortunately, supporting dynamically added properties means that Flow can miss
errors where the programmer accesses a non-existent property by mistake. Thus, Flow
also supports sealed object types, where accesses of non-existent properties are reported
as errors.</p>

<p>When object types appear as annotations, they are considered sealed. Also, non-empty
object literals are considered to have sealed object types. In fact, the only cases where
an object type is not sealed are when it describes an empty object literal (to be extended
by adding properties to it), an object literal with <a href="https://github.com/sebmarkbage/ecmascript-rest-spread">spread properties</a>, or when it describes a map (see below).</p>

<p>Overall, the weaker guarantee for dynamically added properties is a small cost
to pay for the huge increase in flexibility it affords. Specifically, it
allows Flow to usefully type check lots of idiomatic JavaScript code, while
trusting the programmer to follow the discipline of fully initializing an
object before making it available, which effectively ensures that any
dynamically added properties during initialization are only accessed after
initialization is complete.</p>

<p>In any case, for most objects you can altogether avoid adding properties
dynamically, in which case you get stronger guarantees. Furthermore, as
described above, object type annotations are sealed, so you can always force
sealing by going through an annotation (and sealing is enforced at module
boundaries).</p>

<h2>Objects as Maps<a id="objects-as-maps" class="hashref"></a><a href="#objects-as-maps" class="hash">#</a></h2>

<p>An object can be viewed as a map from <code class="highlighter-rouge">string</code> to some value type by setting and
getting its properties via bracket notation (i.e. dynamic accessors), instead of
dot notation. Flow infers a precise value type for the map: in other words, if
you only write <code class="highlighter-rouge">number</code> values to a map, you will read <code class="highlighter-rouge">number</code> values back
(rather than, say, <code class="highlighter-rouge">any</code>).</p>

<p>Such a map can be given a type of the form</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">MapOfNumbers</span> <span class="type T_ASSIGN">=</span> <span class="type T_LCURLY">{</span> <span class="type T_LBRACKET">[</span><span class="type T_IDENTIFIER">key</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_RBRACKET">]</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span> <span class="type T_RCURLY">}</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">numbers</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">MapOfNumbers</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_IDENTIFIER">ten</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">10</span><span class="normal T_COMMA">,</span>
  <span class="normal T_IDENTIFIER">twenty</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">20</span><span class="normal T_COMMA">,</span>
<span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>where <code class="highlighter-rouge">string</code> is the key type and <code class="highlighter-rouge">number</code> is the value type of the map.</p>

<h3>Maps as Records<a id="maps-as-records" class="hashref"></a><a href="#maps-as-records" class="hash">#</a></h3>

<p>Viewing an object as a map does not preclude viewing it as a record. However,
for such an object, the value type of the map does not interfere with the
types of the properties of the record. This is potentially unsound, but we
admit it because a sound design would necessarily lead to severe imprecision
in the types of properties.</p>

<h3>The <code class="highlighter-rouge">Object</code> type<a id="the-object-type" class="hashref"></a><a href="#the-object-type" class="hash">#</a></h3>

<p>This type describes “any object” and you can think of it like an
<code class="highlighter-rouge">any</code>-flavored version of an object type.</p>

<p>In JavaScript, everything is an object. Flow is a bit stricter and does not
consider primitive types to be subtypes of <code class="highlighter-rouge">Object</code>.)</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E5" data-message-id="M5001"><span class="normal T_NUMBER">0</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E5" data-message-id="M5003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E6" data-message-id="M6001"><span class="normal T_STRING">&quot;&quot;</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E6" data-message-id="M6003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E7" data-message-id="M7001"><span class="normal T_TRUE">true</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E7" data-message-id="M7003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E8" data-message-id="M8001"><span class="normal T_NULL">null</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E8" data-message-id="M8003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E9" data-message-id="M9001"><span class="normal T_IDENTIFIER">undefined</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E9" data-message-id="M9003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: (<strong>0</strong>: Object);
    ^ number. This type is incompatible with
1: (0: <strong>Object</strong>);
       ^^^^^^ object type

2: (<strong>&quot;&quot;</strong>: Object);
    ^^ string. This type is incompatible with
2: (&quot;&quot;: <strong>Object</strong>);
        ^^^^^^ object type

3: (<strong>true</strong>: Object);
    ^^^^ boolean. This type is incompatible with
3: (true: <strong>Object</strong>);
          ^^^^^^ object type

4: (<strong>null</strong>: Object);
    ^^^^ null. This type is incompatible with
4: (null: <strong>Object</strong>);
          ^^^^^^ object type

5: (<strong>undefined</strong>: Object);
    ^^^^^^^^^ undefined. This type is incompatible with
5: (undefined: <strong>Object</strong>);
               ^^^^^^ object type</code></pre>
</div>


</div>

<p>Many other types can be treated as objects, however. Naturally objects are
compatible with <code class="highlighter-rouge">Object</code>, but so are functions and classes.</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Object</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_FUNCTION">function</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Object</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_CLASS">class</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Object</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E10" data-message-id="M10001"><span class="normal T_LBRACKET">[</span><span class="normal T_RBRACKET">]</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E10" data-message-id="M10003"><span class="type T_IDENTIFIER">Object</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Flow does not treat arrays as objects (likely to change)</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>4: (<strong>[]</strong>: Object); // Flow does not treat arrays as objects (likely to change)
    ^^ empty array literal. This type is incompatible with
4: ([]: <strong>Object</strong>); // Flow does not treat arrays as objects (likely to change)
        ^^^^^^ object type</code></pre>
</div>


</div>

<script>require(['inlineErrors'], function(inlineErrors) {
  inlineErrors.highlight([{"id":"E1","messages":[{"id":"M1001","description":"string","context":"  foo(x) { this.x = x; }","source":"-","start":{"line":20,"column":21,"offset":287},"end":{"line":20,"column":21,"offset":288}},{"id":"M1002","description":"This type is incompatible with","context":null},{"id":"M1003","description":"number","context":"  x: 42,","source":"-","start":{"line":19,"column":6,"offset":263},"end":{"line":19,"column":7,"offset":265}}],"operation":{"description":"call of method `foo`\n","context":"o.foo('hello');","source":"-","start":{"line":22,"column":1,"offset":295},"end":{"line":22,"column":14,"offset":309}}},{"id":"E2","messages":[{"id":"M2001","description":"Bar","context":"var badObj: {a: boolean; b: string; c: Foo} = {a: true, b: \"Hi\", c: new Bar()}","source":"-","start":{"line":50,"column":73,"offset":945},"end":{"line":50,"column":75,"offset":948}},{"id":"M2002","description":"This type is incompatible with","context":null},{"id":"M2003","description":"Foo","context":"var badObj: {a: boolean; b: string; c: Foo} = {a: true, b: \"Hi\", c: new Bar()}","source":"-","start":{"line":50,"column":40,"offset":912},"end":{"line":50,"column":42,"offset":915}}],"operation":null},{"id":"E3","messages":[{"id":"M3001","description":"undefined","context":"optObj.b * 10 // error: undefined is incompatible with number","source":"-","start":{"line":88,"column":1,"offset":1905},"end":{"line":88,"column":8,"offset":1913}},{"id":"M3002","description":"This type is incompatible with","context":null},{"id":"M3003","description":"number","context":"optObj.b * 10 // error: undefined is incompatible with number","source":"-","start":{"line":88,"column":1,"offset":1905},"end":{"line":88,"column":13,"offset":1918}}],"operation":null},{"id":"E4","messages":[{"id":"M4001","description":"number","context":"var test: string = bar(o);","source":"-","start":{"line":169,"column":20,"offset":5063},"end":{"line":169,"column":25,"offset":5069}},{"id":"M4002","description":"This type is incompatible with","context":null},{"id":"M4003","description":"string","context":"var test: string = bar(o);","source":"-","start":{"line":169,"column":11,"offset":5054},"end":{"line":169,"column":16,"offset":5060}}],"operation":null},{"id":"E5","messages":[{"id":"M5001","description":"number","context":"(0: Object);","source":"-","start":{"line":238,"column":2,"offset":7950},"end":{"line":238,"column":2,"offset":7951}},{"id":"M5002","description":"This type is incompatible with","context":null},{"id":"M5003","description":"object type","context":"(0: Object);","source":"-","start":{"line":238,"column":5,"offset":7953},"end":{"line":238,"column":10,"offset":7959}}],"operation":null},{"id":"E6","messages":[{"id":"M6001","description":"string","context":"(\"\": Object);","source":"-","start":{"line":239,"column":2,"offset":7963},"end":{"line":239,"column":3,"offset":7965}},{"id":"M6002","description":"This type is incompatible with","context":null},{"id":"M6003","description":"object type","context":"(\"\": Object);","source":"-","start":{"line":239,"column":6,"offset":7967},"end":{"line":239,"column":11,"offset":7973}}],"operation":null},{"id":"E7","messages":[{"id":"M7001","description":"boolean","context":"(true: Object);","source":"-","start":{"line":240,"column":2,"offset":7977},"end":{"line":240,"column":5,"offset":7981}},{"id":"M7002","description":"This type is incompatible with","context":null},{"id":"M7003","description":"object type","context":"(true: Object);","source":"-","start":{"line":240,"column":8,"offset":7983},"end":{"line":240,"column":13,"offset":7989}}],"operation":null},{"id":"E8","messages":[{"id":"M8001","description":"null","context":"(null: Object);","source":"-","start":{"line":241,"column":2,"offset":7993},"end":{"line":241,"column":5,"offset":7997}},{"id":"M8002","description":"This type is incompatible with","context":null},{"id":"M8003","description":"object type","context":"(null: Object);","source":"-","start":{"line":241,"column":8,"offset":7999},"end":{"line":241,"column":13,"offset":8005}}],"operation":null},{"id":"E9","messages":[{"id":"M9001","description":"undefined","context":"(undefined: Object);","source":"-","start":{"line":242,"column":2,"offset":8009},"end":{"line":242,"column":10,"offset":8018}},{"id":"M9002","description":"This type is incompatible with","context":null},{"id":"M9003","description":"object type","context":"(undefined: Object);","source":"-","start":{"line":242,"column":13,"offset":8020},"end":{"line":242,"column":18,"offset":8026}}],"operation":null},{"id":"E10","messages":[{"id":"M10001","description":"empty array literal","context":"([]: Object); // Flow does not treat arrays as objects (likely to change)","source":"-","start":{"line":252,"column":2,"offset":8242},"end":{"line":252,"column":3,"offset":8244}},{"id":"M10002","description":"This type is incompatible with","context":null},{"id":"M10003","description":"object type","context":"([]: Object); // Flow does not treat arrays as objects (likely to change)","source":"-","start":{"line":252,"column":6,"offset":8246},"end":{"line":252,"column":11,"offset":8252}}],"operation":null}]);
});</script>

    <p class="docs-prevnext">
      
        <a href="/flowtype/docs/classes.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/flowtype/docs/functions.html#_">Next &rarr;</a>
      
    </p>

    <p class="edit-page-block">
      You can
      <a href="https://github.com/facebook/flow/tree/master/website/docs/ref/objects.doc.js" target="_blank">
        edit this page on GitHub
      </a>
      and send us a pull request!
    </p>

    <a id="_"></a>
</article>

</div></section>

<footer><div class='width'>
    &copy; Copyright 2014 - 2016, Facebook Inc.
</div></footer>

<script>require(['default']);</script>
</body>
</html>

