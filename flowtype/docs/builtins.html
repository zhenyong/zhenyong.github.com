<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
    <meta charset='utf-8'>
    <title>Flow | 内置的类型</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/default.css">
    <link type="text/css" rel="stylesheet" href="/flowtype/assets/syntax.css">
    <link rel='shortcut icon' href='/flowtype/static/favicon.png'>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="内置的类型" />
    <meta property="og:site_name" content="flowtype">
    <meta property='og:description' content='Flow is a static type checker for
    JavaScript.'>
    <meta property='og:image' content='http://flowtype.org/static/flow-og-image.png'>
    <meta property='og:url' content="http://flowtype.org/docs/builtins.html">
    
    <meta property='og:type' content='website'>
    
    <script type="text/javascript" src="/flowtype/assets/prelude.js"></script>
    <link rel="alternate" type="application/rss+xml" title="Flow" href="http://flowtype.org/blog/feed.xml">
</head>
<body class="">

<header class='topbar'><nav class='width'>
<a href='/flowtype/'>
  <img src="/flowtype/assets/flow-logo.png" alt="Flow logo" class="logo" />
</a>
    <ul>
      <li><a href="/flowtype/docs/getting-started.html#_"
           class="active" >
          文档
      </a></li>
      <li><a href="/flowtype/try/"
          >
          试试
      </a></li>
      <li><a href="/flowtype/support.html"
          >
          支持
      </a></li>
      <li><a href="/flowtype/blog"
          >
          博客
      </a></li>
      <li>
        <input id="algolia-doc-search" type="text" placeholder="Search docs..." />
      </li>
    </ul>
    <ul class="external">
      <li><a href="http://github.com/facebook/flow">官方GitHub</a>
      <li><a href="http://github.com/zhenyong">译者GitHub</a>
    </ul>
</nav></header>


<section class='content'><div class='width'>

<nav class='toc'>
  
    <section>
      <h3>Quick Start</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/getting-started.html#_">
              Flow 起步
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/five-simple-examples.html#_">
              五个简单例子
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>使用指南</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/new-project.html#_">
              开始一个新的 Flow 项目
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/existing.html#_">
              在已有的代码上跑 Flow
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-annotations.html#_">
              类型注解
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/third-party.html#_">
              检测第三方模块调用代码
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/running.html#_">
              运行 Flow 代码
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/troubleshooting.html#_">
              干掉错误
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/cli.html#_">
              命令行工具
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/advanced-configuration.html#_">
              高级配置
            </a>
            
          </li>
        
      </ul>
    </section>
  
    <section>
      <h3>Language Reference</h3>
      <ul>
        
          <li>
            <a href="/flowtype/docs/quick-reference.html#_">
              快速参考
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/builtins.html#_" class="active">
              内置的类型
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/syntax.html#_">
              Syntax
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/arrays.html#_">
              Arrays and Tuples
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/classes.html#_">
              Classes
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/objects.html#_">
              Objects
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/functions.html#_">
              Functions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/nullable-types.html#_">
              Maybe Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/destructuring.html#_">
              Destructuring
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/type-aliases.html#_">
              Type Aliases
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/union-intersection-types.html#_">
              Union and Intersection Types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/typeof.html#_">
              Typeof types
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/dynamic-type-tests.html#_">
              Dynamic Type Tests
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/disjoint-unions.html#_">
              Disjoint Unions
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/modules.html#_">
              Modules
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/declarations.html#_">
              Declarations
            </a>
            
          </li>
        
          <li>
            <a href="/flowtype/docs/react.html#_">
              React
            </a>
            
          </li>
        
      </ul>
    </section>
  
</nav>


<article class='withtoc'>
    <h1>内置的类型</h1>
    <p></p>

    
<p>Flow 包含很多内置类型来描述 JavasScript 中的值</p>

<p>有些是给原生类型用的，像 <code class="highlighter-rouge">number</code> 和 <code class="highlighter-rouge">string</code>。
<code class="highlighter-rouge">any</code> 和 <code class="highlighter-rouge">mixed</code> 比较宽松，没有把值的类型限定死，而其他字面类型则描述某一种类型。</p>

<p>Flow 支持标准 js，浏览器 api 和 Node.js 标准库，所以开箱即用</p>

<h4>注意使用类型转换语法<a id="section" class="hashref"></a><a href="#section" class="hash">#</a></h4>

<p>为了方便讲解，下面例子大量使用类型转换：</p>

<p>Flow 的类型转换目测就那么回事：
表达式 <code class="highlighter-rouge">e</code> 和类型 <code class="highlighter-rouge">T</code> 组成 <code class="highlighter-rouge">(e:T)</code>，如果 e 不属于 <code class="highlighter-rouge">T</code> 类型（子集）则会报类型错误</p>

<p>换个说法，要检测一个强制转换的用法是否正确，只需要把它当做变量或者参数的类型注解来检测就行了。
举个例子，如果 <code class="highlighter-rouge">var x:T = e</code> 合法，意味着 <code class="highlighter-rouge">(e:T)</code> 同样合法</p>

<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6
7
8
9</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E1" data-message-id="M1001"><span class="normal T_NUMBER">1</span> <span class="normal T_PLUS">+</span> <span class="normal T_NUMBER">1</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E1" data-message-id="M1003"><span class="type T_STRING_TYPE">string</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Error: Numbers are not strings</span>
<span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;Hello, World&quot;</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// OK: Strings are strings</span>

<span class="normal T_CLASS">class</span> <span class="normal T_IDENTIFIER">A</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_CLASS">class</span> <span class="normal T_IDENTIFIER">B</span> <span class="normal T_EXTENDS">extends</span> <span class="normal T_IDENTIFIER">A</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_LET">let</span> <span class="normal T_IDENTIFIER">a</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">A</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_COMMA">,</span>
    <span class="normal T_IDENTIFIER">b</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">B</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">b</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">A</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// OK: B is a subclass of A</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E2" data-message-id="M2001"><span class="normal T_IDENTIFIER">a</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E2" data-message-id="M2003"><span class="type T_IDENTIFIER">B</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Error: A is not a subclass of B</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: (<strong>1 + 1</strong>: string); // Error: Numbers are not strings
    ^^^^^ number. This type is incompatible with
1: (1 + 1: <strong>string</strong>); // Error: Numbers are not strings
           ^^^^^^ string

9: (<strong>a</strong>: B); // Error: A is not a subclass of B
    ^ A. This type is incompatible with
9: (a: <strong>B</strong>); // Error: A is not a subclass of B
       ^ B</code></pre>
</div>


</div>

<h2>boolean<a id="boolean" class="hashref"></a><a href="#boolean" class="hash">#</a></h2>

<p>这个类型用来描述 JavaScript 的布尔值，这个类型的值就只有 <code class="highlighter-rouge">true</code> 和 <code class="highlighter-rouge">false</code></p>

<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="normal T_TRUE">true</span><span class="type T_COLON">:</span> <span class="type T_BOOLEAN_TYPE">boolean</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_FALSE">false</span><span class="type T_COLON">:</span> <span class="type T_BOOLEAN_TYPE">boolean</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E3" data-message-id="M3001"><span class="normal T_STRING">&quot;foo&quot;</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E3" data-message-id="M3003"><span class="type T_BOOLEAN_TYPE">boolean</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// strings are not booleans</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>3: (<strong>&quot;foo&quot;</strong>: boolean); // strings are not booleans
    ^^^^^ string. This type is incompatible with
3: (&quot;foo&quot;: <strong>boolean</strong>); // strings are not booleans
           ^^^^^^^ boolean</code></pre>
</div>


</div>

<p>Javascript 允许把某些非布尔值当做布尔值来用。Flow 理解也允许用在 <code class="highlighter-rouge">if</code> 作为条件，
或者是 <code class="highlighter-rouge">&amp;&amp;</code> 之类的逻辑运算。如果你需要强制把对象转化为 <code class="highlighter-rouge">boolean</code>，
可以用 js 自带的 <code class="highlighter-rouge">Boolean</code> 方法</p>

<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3</pre>
        </td>
        <td class="code"><pre><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">takes_boolean</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="type T_COLON">:</span> <span class="error" data-error-id="E4" data-message-id="M4003"><span class="type T_BOOLEAN_TYPE">boolean</span></span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_VOID_TYPE">void</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">takes_boolean</span><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E4" data-message-id="M4001"><span class="normal T_NUMBER">0</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Implicit casting is an error.</span>
<span class="normal T_IDENTIFIER">takes_boolean</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">Boolean</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">0</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Adding an explicit cast type checks.</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>2: <strong>takes_boolean(0)</strong>; // Implicit casting is an error.
   ^^^^^^^^^^^^^^^^ function call
2: takes_boolean(<strong>0</strong>); // Implicit casting is an error.
                 ^ number. This type is incompatible with
1: function takes_boolean(x: <strong>boolean</strong>): void {}
                             ^^^^^^^ boolean</code></pre>
</div>


</div>

<p>注意 <code class="highlighter-rouge">boolean</code> 和 <code class="highlighter-rouge">Boolean</code> 是不同的，前者是原生类型的布尔，就是程序中的字面量
<code class="highlighter-rouge">true</code> 和 <code class="highlighter-rouge">false</code>，或者是类似 <code class="highlighter-rouge">a === b</code> 这类表达式的值。而后者是一个包装对象，
很少用到。</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E5" data-message-id="M5001"><span class="normal T_TRUE">true</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E5" data-message-id="M5003"><span class="type T_IDENTIFIER">Boolean</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">Boolean</span><span class="normal T_LPAREN">(</span><span class="normal T_FALSE">false</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Boolean</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: (<strong>true</strong>: Boolean);
    ^^^^ boolean. This type is incompatible with
1: (true: <strong>Boolean</strong>);
          ^^^^^^^ Boolean</code></pre>
</div>


</div>

<h2>number<a id="number" class="hashref"></a><a href="#number" class="hash">#</a></h2>

<p>JavaScript 只有一种数字类型，就是 IEEE 754 浮点数。
<code class="highlighter-rouge">number</code> 类型就是描述它的，包括 <code class="highlighter-rouge">Infinity</code> 和 <code class="highlighter-rouge">NaN</code></p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">3.14</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">42</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">NaN</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>

<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">parseFloat</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;not a number&quot;</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// hint: NaN</span></code></pre>
</div>

<p>注意：<code class="highlighter-rouge">number</code> 和 <code class="highlighter-rouge">Number</code> 是不同的。前者是原生数字类型，像代码里的 <code class="highlighter-rouge">3.14</code> 和 <code class="highlighter-rouge">42</code>，
或者是 <code class="highlighter-rouge">parseFlow(input.value)</code> 这类表达式的值。而后者是 Number 包装对象，很少用到。</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E6" data-message-id="M6001"><span class="normal T_NUMBER">0</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E6" data-message-id="M6003"><span class="type T_IDENTIFIER">Number</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">Number</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">0</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: (<strong>0</strong>: Number);
    ^ number. This type is incompatible with
1: (0: <strong>Number</strong>);
       ^^^^^^ Number</code></pre>
</div>


</div>

<h2>string<a id="string" class="hashref"></a><a href="#string" class="hash">#</a></h2>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;bar&quot;</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>一般来说，类型静默转换在 Flow 中是会报错的。
不过，将 <code class="highlighter-rouge">字符串</code> 和 <code class="highlighter-rouge">数字</code> 用 <code class="highlighter-rouge">+</code> 号连接生成字符串， 在 JS 中很常见。
所以 Flow 也接受这种方式。</p>

<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_LPAREN">(</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">100</span> <span class="normal T_PLUS">+</span> <span class="normal T_STRING">&quot;%&quot;</span><span class="normal T_RPAREN">)</span> <span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>注意：<code class="highlighter-rouge">string</code> 和 <code class="highlighter-rouge">String</code> 是不同类型。前者是原生类型字符串，像程序中的 <code class="highlighter-rouge">"foo"</code> 和
<code class="highlighter-rouge">"bar"</code>，或者是 <code class="highlighter-rouge">""+42</code> 这类表达式的返回值，而后者就是一个字符串包装类，很少用到。</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E7" data-message-id="M7001"><span class="normal T_STRING">&quot;foo&quot;</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E7" data-message-id="M7003"><span class="type T_IDENTIFIER">String</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">String</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">String</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>1: (<strong>&quot;foo&quot;</strong>: String);
    ^^^^^ string. This type is incompatible with
1: (&quot;foo&quot;: <strong>String</strong>);
           ^^^^^^ String</code></pre>
</div>


</div>

<h2>null and void<a id="null-and-void" class="hashref"></a><a href="#null-and-void" class="hash">#</a></h2>

<p>JavaScript 有 <code class="highlighter-rouge">null</code> 和 <code class="highlighter-rouge">undefined</code>，Flow 中， <code class="highlighter-rouge">null</code>(值) 有 <code class="highlighter-rouge">null</code> 类型，
<code class="highlighter-rouge">undefined</code> 有 <code class="highlighter-rouge">void</code> 类型</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="normal T_NULL">null</span><span class="type T_COLON">:</span> <span class="type T_NULL">null</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// yup</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E8" data-message-id="M8001"><span class="normal T_NULL">null</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E8" data-message-id="M8003"><span class="type T_VOID_TYPE">void</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// nope</span>

<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">undefined</span><span class="type T_COLON">:</span> <span class="type T_VOID_TYPE">void</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// yup</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E9" data-message-id="M9001"><span class="normal T_IDENTIFIER">undefined</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E9" data-message-id="M9003"><span class="type T_NULL">null</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// nope</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>2: (<strong>null</strong>: void); // nope
    ^^^^ null. This type is incompatible with
2: (null: <strong>void</strong>); // nope
          ^^^^ undefined

5: (<strong>undefined</strong>: null); // nope
    ^^^^^^^^^ undefined. This type is incompatible with
5: (undefined: <strong>null</strong>); // nope
               ^^^^ null</code></pre>
</div>


</div>

<p>对于可选的对象属性和可选的方法参数用 <code class="highlighter-rouge">T|void</code>，有些用 <code class="highlighter-rouge">T</code></p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
        </td>
        <td class="code"><pre><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">optional_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_PLING">?</span><span class="type T_COLON">:</span> <span class="error" data-error-id="E10" data-message-id="M10003"><span class="type T_STRING_TYPE">string</span></span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_BIT_OR">|</span><span class="type T_VOID_TYPE">void</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">optional_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">optional_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">undefined</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">optional_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">optional_fun</span><span class="normal T_LPAREN">(</span><span class="error" data-error-id="E10" data-message-id="M10001"><span class="normal T_NULL">null</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// null is not a string, nor void</span>

<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">optional_obj</span> <span class="type T_ASSIGN">=</span> <span class="type T_LCURLY">{</span> <span class="normal T_IDENTIFIER">foo</span><span class="type T_PLING">?</span><span class="type T_COLON">:</span> <span class="error" data-error-id="E11" data-message-id="M11003"><span class="type T_STRING_TYPE">string</span></span> <span class="type T_RCURLY">}</span>
<span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">optional_obj</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="normal T_IDENTIFIER">undefined</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">optional_obj</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">optional_obj</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="error" data-error-id="E11" data-message-id="M11001"><span class="normal T_NULL">null</span></span><span class="normal T_RCURLY">}</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">optional_obj</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// null is not a string, nor void</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>7: <strong>optional_fun(null)</strong>; // null is not a string, nor void
   ^^^^^^^^^^^^^^^^^^ function call
7: optional_fun(<strong>null</strong>); // null is not a string, nor void
                ^^^^ null. This type is incompatible with
1: function optional_fun(foo?: <strong>string</strong>) {
                               ^^^^^^ string

13: ({foo: <strong>null</strong>}: optional_obj); // null is not a string, nor void
           ^^^^ null. This type is incompatible with
9: type optional_obj = { foo?: <strong>string</strong> }
                               ^^^^^^ string</code></pre>
</div>


</div>

<p>方法的参数如果有默认值就意味着是可选的，不过只针对调用的时候是可选类型，一旦进入
方法体，这个参数值就是 非-<code class="highlighter-rouge">void</code> 类型</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">default_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_STRING">&quot;default foo&quot;</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">default_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">default_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">undefined</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">default_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>对于可能是某个类型 <code class="highlighter-rouge">T</code> 的，还可以这样 <code class="highlighter-rouge">T|void|null</code> 表示可选</p>

<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">maybe_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_PLING">?</span><span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="type T_BIT_OR">|</span><span class="type T_VOID_TYPE">void</span><span class="type T_BIT_OR">|</span><span class="type T_NULL">null</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">maybe_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">maybe_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">undefined</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">maybe_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">maybe_fun</span><span class="normal T_LPAREN">(</span><span class="normal T_NULL">null</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<h2>any<a id="any" class="hashref"></a><a href="#any" class="hash">#</a></h2>

<p><code class="highlighter-rouge">any</code> 是所有类型的超集，同时也是所有类型的子集。
如果有些地方目测就一定是某种类型，那么 Flow 肯定也能看得出来，给你提醒。</p>

<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">takes_any</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="type T_COLON">:</span> <span class="type T_ANY_TYPE">any</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_VOID_TYPE">void</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">takes_any</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">0</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">takes_any</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">takes_any</span><span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span> <span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;bar&quot;</span> <span class="normal T_RCURLY">}</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>

<span class="normal T_DECLARE">declare</span> <span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">unsafe</span><span class="type T_COLON">:</span> <span class="type T_ANY_TYPE">any</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">unsafe</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">unsafe</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">unsafe</span><span class="type T_COLON">:</span> <span class="type T_LCURLY">{</span> <span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span> <span class="type T_RCURLY">}</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>除了关注类型的匹配外，对 <code class="highlighter-rouge">any</code> 类型值的操作的相关的概念也是值得思考的。
对于 <code class="highlighter-rouge">any</code> 类型的值，通过任何属性访问，返回值依然是 <code class="highlighter-rouge">any</code> 类型。
你甚至可以把 <code class="highlighter-rouge">any</code> 类型的值当做方法来用，传入任意多个任意类型的参数。</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_IDENTIFIER">unsafe</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">foo</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">bar</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">baz</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">unsafe</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">unsafe</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;bar&quot;</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_TYPE">number</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></code></pre>
</div>

<p>你可以认为 <code class="highlighter-rouge">any</code> 类型就是某种类型系统的后门。
使用 <code class="highlighter-rouge">any</code> 是有潜在危险的，尽可能避免。</p>

<p>不过，有时候用它也是很靠谱的，例如，当你对现有代码添加类型，
使用 <code class="highlighter-rouge">any</code> 可以帮助你平缓过渡到类型检测。
同样，对第三方模块声明 <code class="highlighter-rouge">any</code> 也方便整合。</p>

<p>最后，由于 JS 极其动态的特性，有些情况 Flow 是无法解析的,
而 <code class="highlighter-rouge">any</code> 的原则就是把不确定类型的值变成有类型</p>

<h2>mixed<a id="mixed" class="hashref"></a><a href="#mixed" class="hash">#</a></h2>

<p><code class="highlighter-rouge">mixed</code> 跟 <code class="highlighter-rouge">any</code> 一样，是所有类型的超集，但不是所有类型子集。
这意味着 <code class="highlighter-rouge">mixed</code> 稍微安全版的 <code class="highlighter-rouge">any</code>，尽量能用 <code class="highlighter-rouge">mixed</code> 就不用 <code class="highlighter-rouge">any</code>。</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6
7
8
9</pre>
        </td>
        <td class="code"><pre><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">takes_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">mixed</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_VOID_TYPE">void</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_IDENTIFIER">takes_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">0</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">takes_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">takes_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_LCURLY">{</span> <span class="normal T_IDENTIFIER">foo</span><span class="normal T_COLON">:</span> <span class="normal T_STRING">&quot;bar&quot;</span> <span class="normal T_RCURLY">}</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>

<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">returns_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">mixed</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E12" data-message-id="M12001"><span class="normal T_IDENTIFIER">returns_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E12" data-message-id="M12003"><span class="type T_NUMBER_TYPE">number</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E13" data-message-id="M13001"><span class="normal T_IDENTIFIER">returns_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E13" data-message-id="M13003"><span class="type T_STRING_TYPE">string</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E14" data-message-id="M14001"><span class="normal T_IDENTIFIER">returns_mixed</span><span class="normal T_LPAREN">(</span><span class="normal T_RPAREN">)</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E14" data-message-id="M14003"><span class="type T_LCURLY">{</span> <span class="normal T_IDENTIFIER">foo</span><span class="type T_COLON">:</span> <span class="type T_STRING_TYPE">string</span> <span class="type T_RCURLY">}</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>7: (<strong>returns_mixed()</strong>: number);
    ^^^^^^^^^^^^^^^ mixed. This type is incompatible with
7: (returns_mixed(): <strong>number</strong>);
                     ^^^^^^ number

8: (<strong>returns_mixed()</strong>: string);
    ^^^^^^^^^^^^^^^ mixed. This type is incompatible with
8: (returns_mixed(): <strong>string</strong>);
                     ^^^^^^ string

9: (<strong>returns_mixed()</strong>: { foo: string });
    ^^^^^^^^^^^^^^^ mixed. This type is incompatible with
9: (returns_mixed(): <strong>{ foo: string }</strong>);
                     ^^^^^^^^^^^^^^^ object type</code></pre>
</div>


</div>

<p>不过还是有可能用 <code class="highlighter-rouge">mixed</code> 表示一个值，不过你得
 <a href="/flowtype/docs/dynamic-type-tests.html">refine</a> 这个值</p>

<p>例如，我们构造某种值的类型，能直接用 JSON 表示。
自然会这样表达这种类型：</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">JSON</span> <span class="type T_ASSIGN">=</span> <span class="type T_BIT_OR">|</span> <span class="type T_STRING_TYPE">string</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_TYPE">number</span> <span class="type T_BIT_OR">|</span> <span class="type T_BOOLEAN_TYPE">boolean</span> <span class="type T_BIT_OR">|</span> <span class="type T_NULL">null</span> <span class="type T_BIT_OR">|</span> <span class="type T_IDENTIFIER">JSONObject</span> <span class="type T_BIT_OR">|</span> <span class="type T_IDENTIFIER">JSONArray</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">JSONObject</span> <span class="type T_ASSIGN">=</span> <span class="type T_LCURLY">{</span> <span class="type T_LBRACKET">[</span><span class="type T_IDENTIFIER">key</span><span class="type T_COLON">:</span><span class="type T_STRING_TYPE">string</span><span class="type T_RBRACKET">]</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">JSON</span> <span class="type T_RCURLY">}</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">JSONArray</span> <span class="type T_ASSIGN">=</span> <span class="type T_IDENTIFIER">Array</span><span class="type T_LESS_THAN">&lt;</span><span class="type T_IDENTIFIER">JSON</span><span class="type T_GREATER_THAN">&gt;</span><span class="type T_SEMICOLON">;</span></code></pre>
</div>

<p>给定一个方法，验证它的参数是不是 JSON 格式。
如果我们把参数类型声明为 <code class="highlighter-rouge">any</code>，那么我们可以直接返回参数，因为 <code class="highlighter-rouge">any</code> 是任意类型的
子集，所以 Flow 不会报错。</p>

<p>如果我们用的是 <code class="highlighter-rouge">mixed</code>，虽然我们可以合法的传入参数，毕竟 <code class="highlighter-rouge">mixed</code> 是所有类型的超集，
但是为了要满足返回值为 <code class="highlighter-rouge">JSON</code> 类型，Flow 就要求我们实现必要的条件判断，因为 <code class="highlighter-rouge">mixed</code>
不是所有类型的子集</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">typedJSON</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">mixed</span><span class="normal T_RPAREN">)</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">JSON</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_IF">if</span> <span class="normal T_LPAREN">(</span><span class="normal T_TYPEOF">typeof</span> <span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_STRING">&quot;object&quot;</span> <span class="normal T_AND">&amp;&amp;</span> <span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_NOT_EQUAL">!==</span> <span class="normal T_NULL">null</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_LET">let</span> <span class="normal T_IDENTIFIER">o</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">JSONObject</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_LCURLY">{</span><span class="normal T_RCURLY">}</span><span class="normal T_SEMICOLON">;</span>
    <span class="normal T_FOR">for</span> <span class="normal T_LPAREN">(</span><span class="normal T_LET">let</span> <span class="normal T_IDENTIFIER">k</span> <span class="normal T_OF">of</span> <span class="normal T_IDENTIFIER">Object</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">keys</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
      <span class="normal T_IDENTIFIER">o</span><span class="normal T_LBRACKET">[</span><span class="normal T_IDENTIFIER">k</span><span class="normal T_RBRACKET">]</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_IDENTIFIER">typedJSON</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_LBRACKET">[</span><span class="normal T_IDENTIFIER">k</span><span class="normal T_RBRACKET">]</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
    <span class="normal T_RCURLY">}</span>
    <span class="normal T_RETURN">return</span> <span class="normal T_IDENTIFIER">o</span><span class="normal T_SEMICOLON">;</span>
  <span class="normal T_RCURLY">}</span>

  <span class="normal T_IF">if</span> <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">Array</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">isArray</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_RETURN">return</span> <span class="normal T_IDENTIFIER">x</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">map</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">typedJSON</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
  <span class="normal T_RCURLY">}</span>

  <span class="normal T_IF">if</span> <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_NULL">null</span> <span class="normal T_OR">||</span>
      <span class="normal T_TYPEOF">typeof</span> <span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_STRING">&quot;string&quot;</span> <span class="normal T_OR">||</span>
      <span class="normal T_TYPEOF">typeof</span> <span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_STRING">&quot;number&quot;</span> <span class="normal T_OR">||</span>
      <span class="normal T_TYPEOF">typeof</span> <span class="normal T_IDENTIFIER">x</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_STRING">&quot;boolean&quot;</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_RETURN">return</span> <span class="normal T_IDENTIFIER">x</span><span class="normal T_SEMICOLON">;</span>
  <span class="normal T_RCURLY">}</span>

  <span class="normal T_THROW">throw</span> <span class="normal T_NEW">new</span> <span class="normal T_IDENTIFIER">Error</span><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;Invalid JSON&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span></code></pre>
</div>

<h2>字面量类型<a id="section-1" class="hashref"></a><a href="#section-1" class="hash">#</a></h2>

<p><code class="highlighter-rouge">boolean</code>, <code class="highlighter-rouge">number</code>, 和 <code class="highlighter-rouge">string</code> 类型分别表示 <code class="highlighter-rouge">true</code> 和 <code class="highlighter-rouge">false</code>,
任意数字，任意字符串。
与此同时，定义一个具体值作为类型也是很有用的。</p>

<p>这个功能表现出惊人的<a href="disjoint-unions.html">灵活多样</a>:
字面量类型可以用来表示枚举类型或其他不相交的并集，</p>

<p>还有一些公用的类型，用来补充表示 <code class="highlighter-rouge">boolean</code>, <code class="highlighter-rouge">number</code>, 和 <code class="highlighter-rouge">string</code> 外的类型</p>
<div class="code-sample">

<div class="language-javascript highlighter-flow">
  <div class="highlight">
    <table style="border-spacing: 0"><tbody>
      <tr>
        <td class="gutter gl" style="text-align: right">
          <pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
        </td>
        <td class="code"><pre><span class="normal T_LPAREN">(</span><span class="normal T_STRING">&quot;foo&quot;</span><span class="type T_COLON">:</span> <span class="type T_STRING">&quot;foo&quot;</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E15" data-message-id="M15001"><span class="normal T_STRING">&quot;bar&quot;</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E15" data-message-id="M15003"><span class="type T_STRING">&quot;foo&quot;</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// `&quot;bar&quot;` is not exactly `&quot;foo&quot;`</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E16" data-message-id="M16001"><span class="normal T_STRING">&quot;fo&quot;</span><span class="normal T_PLUS">+</span><span class="normal T_STRING">&quot;o&quot;</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E16" data-message-id="M16003"><span class="type T_STRING">&quot;foo&quot;</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// even simple expressions lose literal information</span>

<span class="normal T_LPAREN">(</span><span class="normal T_NUMBER">1</span><span class="type T_COLON">:</span> <span class="type T_NUMBER_SINGLETON_TYPE">1</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E17" data-message-id="M17001"><span class="normal T_NUMBER">2</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E17" data-message-id="M17003"><span class="type T_NUMBER_SINGLETON_TYPE">1</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// `2` is not exactly `1`</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E18" data-message-id="M18001"><span class="normal T_NUMBER">1</span><span class="normal T_PLUS">+</span><span class="normal T_NUMBER">1</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E18" data-message-id="M18003"><span class="type T_NUMBER_SINGLETON_TYPE">2</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// even simple expressions lose literal information</span>

<span class="normal T_LPAREN">(</span><span class="normal T_TRUE">true</span><span class="type T_COLON">:</span> <span class="type T_TRUE">true</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="error" data-error-id="E19" data-message-id="M19001"><span class="normal T_TRUE">true</span></span><span class="type T_COLON">:</span> <span class="error" data-error-id="E19" data-message-id="M19003"><span class="type T_FALSE">false</span></span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// `true` is not exactly `false`</span>

<span class="comment line">// boolean expressions *do* preserve literal information</span>
<span class="normal T_LPAREN">(</span><span class="normal T_NOT">!</span><span class="normal T_TRUE">true</span><span class="type T_COLON">:</span> <span class="type T_FALSE">false</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_TRUE">true</span> <span class="normal T_AND">&amp;&amp;</span> <span class="normal T_FALSE">false</span><span class="type T_COLON">:</span> <span class="type T_FALSE">false</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_LPAREN">(</span><span class="normal T_TRUE">true</span> <span class="normal T_OR">||</span> <span class="normal T_FALSE">false</span><span class="type T_COLON">:</span> <span class="type T_TRUE">true</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span></pre></td>
      </tr>
    </tbody></table>
  </div>
</div>


<a class="show" href="#" onclick="this.parentNode.className = 'code-sample shown'; return false">show Flow output</a>
<a class="hide" href="#" onclick="this.parentNode.className = 'code-sample'; return false">hide Flow output</a>

<div class="language-bash highlighter-flow">
  <pre class="highlight"><code>$&gt; flow</code></pre>
</div>
<div class="language-text cli-error highlighter-flow">
  <pre class="highlight"><code>2: (<strong>&quot;bar&quot;</strong>: &quot;foo&quot;); // `&quot;bar&quot;` is not exactly `&quot;foo&quot;`
    ^^^^^ string. Expected string literal `foo`, got `bar` instead
2: (&quot;bar&quot;: <strong>&quot;foo&quot;</strong>); // `&quot;bar&quot;` is not exactly `&quot;foo&quot;`
           ^^^^^ string literal `foo`

3: (<strong>&quot;fo&quot;+&quot;o&quot;</strong>: &quot;foo&quot;); // even simple expressions lose literal information
    ^^^^^^^^ string. Expected string literal `foo`
3: (&quot;fo&quot;+&quot;o&quot;: <strong>&quot;foo&quot;</strong>); // even simple expressions lose literal information
              ^^^^^ string literal `foo`

6: (<strong>2</strong>: 1); // `2` is not exactly `1`
    ^ number. Expected number literal `1`, got `2` instead
6: (2: <strong>1</strong>); // `2` is not exactly `1`
       ^ number literal `1`

7: (<strong>1+1</strong>: 2); // even simple expressions lose literal information
    ^^^ number. Expected number literal `2`
7: (1+1: <strong>2</strong>); // even simple expressions lose literal information
         ^ number literal `2`

10: (<strong>true</strong>: false); // `true` is not exactly `false`
     ^^^^ boolean. Expected boolean literal `false`, got `true` instead
10: (true: <strong>false</strong>); // `true` is not exactly `false`
           ^^^^^ boolean literal `false`</code></pre>
</div>


</div>

<p>我们用字面类型弄点有意思的，下面的程序展示了字面量类型可以定义对象的属性类型。
同事也展示了元组类型怎么作枚举类型用。</p>
<div class="language-javascript highlighter-flow">
  <pre class="highlight"><code><span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">Suit</span> <span class="type T_ASSIGN">=</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Diamonds&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Clubs&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Hearts&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Spades&quot;</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">Rank</span> <span class="type T_ASSIGN">=</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">2</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">3</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">4</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">5</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">6</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">7</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">8</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">9</span> <span class="type T_BIT_OR">|</span> <span class="type T_NUMBER_SINGLETON_TYPE">10</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Jack&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Queen&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;King&quot;</span>
  <span class="type T_BIT_OR">|</span> <span class="type T_STRING">&quot;Ace&quot;</span><span class="type T_SEMICOLON">;</span>
<span class="normal T_TYPE">type</span> <span class="type T_IDENTIFIER">Card</span> <span class="type T_ASSIGN">=</span> <span class="type T_LCURLY">{</span>
  <span class="normal T_IDENTIFIER">suit</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Suit</span><span class="type T_COMMA">,</span>
  <span class="normal T_IDENTIFIER">rank</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Rank</span><span class="type T_COMMA">,</span>
<span class="type T_RCURLY">}</span>

<span class="normal T_DECLARE">declare</span> <span class="normal T_VAR">var</span> <span class="normal T_IDENTIFIER">cards</span><span class="type T_COLON">:</span> <span class="type T_IDENTIFIER">Card</span><span class="type T_LBRACKET">[</span><span class="type T_RBRACKET">]</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">cards</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">sort</span><span class="normal T_LPAREN">(</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_RPAREN">)</span> <span class="normal T_ARROW">=&gt;</span> <span class="normal T_IDENTIFIER">cardComparator</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_IDENTIFIER">cards</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">sort</span><span class="normal T_LPAREN">(</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_RPAREN">)</span> <span class="normal T_ARROW">=&gt;</span> <span class="normal T_IDENTIFIER">cardComparator</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_COMMA">,</span> <span class="normal T_TRUE">true</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span> <span class="comment line">// Aces high</span>

<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">suitOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">suit</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_RETURN">return</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_IDENTIFIER">Diamonds</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">0</span><span class="normal T_COMMA">,</span>
    <span class="normal T_IDENTIFIER">Clubs</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">1</span><span class="normal T_COMMA">,</span>
    <span class="normal T_IDENTIFIER">Hearts</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">3</span><span class="normal T_COMMA">,</span>
    <span class="normal T_IDENTIFIER">Spades</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">4</span><span class="normal T_COMMA">,</span>
  <span class="normal T_RCURLY">}</span><span class="normal T_LBRACKET">[</span><span class="normal T_IDENTIFIER">suit</span><span class="normal T_RBRACKET">]</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span>

<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">rankOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">rank</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">aceHigh</span> <span class="normal T_ASSIGN">=</span> <span class="normal T_FALSE">false</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_IF">if</span> <span class="normal T_LPAREN">(</span><span class="normal T_TYPEOF">typeof</span> <span class="normal T_IDENTIFIER">rank</span> <span class="normal T_STRICT_EQUAL">===</span> <span class="normal T_STRING">&quot;string&quot;</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_RETURN">return</span> <span class="normal T_LCURLY">{</span>
      <span class="normal T_IDENTIFIER">Jack</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">11</span><span class="normal T_COMMA">,</span>
      <span class="normal T_IDENTIFIER">Queen</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">12</span><span class="normal T_COMMA">,</span>
      <span class="normal T_IDENTIFIER">King</span><span class="normal T_COLON">:</span> <span class="normal T_NUMBER">13</span><span class="normal T_COMMA">,</span>
      <span class="normal T_IDENTIFIER">Ace</span><span class="normal T_COLON">:</span> <span class="normal T_IDENTIFIER">aceHigh</span> <span class="normal T_PLING">?</span> <span class="normal T_NUMBER">14</span> <span class="normal T_COLON">:</span> <span class="normal T_NUMBER">1</span><span class="normal T_COMMA">,</span>
    <span class="normal T_RCURLY">}</span><span class="normal T_LBRACKET">[</span><span class="normal T_IDENTIFIER">rank</span><span class="normal T_RBRACKET">]</span><span class="normal T_SEMICOLON">;</span>
  <span class="normal T_RCURLY">}</span> <span class="normal T_ELSE">else</span> <span class="normal T_LCURLY">{</span>
    <span class="normal T_RETURN">return</span> <span class="normal T_IDENTIFIER">rank</span><span class="normal T_SEMICOLON">;</span>
  <span class="normal T_RCURLY">}</span>
<span class="normal T_RCURLY">}</span>

<span class="normal T_FUNCTION">function</span> <span class="normal T_IDENTIFIER">cardComparator</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">b</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">aceHigh</span><span class="normal T_PLING">?</span><span class="normal T_RPAREN">)</span> <span class="normal T_LCURLY">{</span>
  <span class="normal T_RETURN">return</span> <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">rankOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">rank</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">aceHigh</span><span class="normal T_RPAREN">)</span> <span class="normal T_MINUS">-</span> <span class="normal T_IDENTIFIER">rankOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">b</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">rank</span><span class="normal T_COMMA">,</span> <span class="normal T_IDENTIFIER">aceHigh</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span>
      <span class="normal T_OR">||</span> <span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">suitOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">a</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">suit</span><span class="normal T_RPAREN">)</span> <span class="normal T_MINUS">-</span> <span class="normal T_IDENTIFIER">suitOrder</span><span class="normal T_LPAREN">(</span><span class="normal T_IDENTIFIER">b</span><span class="normal T_PERIOD">.</span><span class="normal T_IDENTIFIER">suit</span><span class="normal T_RPAREN">)</span><span class="normal T_RPAREN">)</span><span class="normal T_SEMICOLON">;</span>
<span class="normal T_RCURLY">}</span></code></pre>
</div>

<p>注意，Flow 能够探测出 <code class="highlighter-rouge">suitOrder</code>, <code class="highlighter-rouge">rankOrder</code>, 和 <code class="highlighter-rouge">cardComparator</code>
的参数以及返回类型。
可以试试把这些代码拷贝到编辑器重现错误，看看 Flow 能捕获到什么。</p>

<h2>JavaScript 标准库<a id="javascript-" class="hashref"></a><a href="#javascript-" class="hash">#</a></h2>

<p>Flow 支持 <a href="https://github.com/facebook/flow/blob/master/lib/core.js">JavaSript标准</a> 类型</p>

<p>Flow 广泛支持标准库，包括遍历、迭代器和生成器。</p>

<h2>浏览器接口<a id="section-2" class="hashref"></a><a href="#section-2" class="hash">#</a></h2>

<p>Flow 支持 <a href="https://github.com/facebook/flow/blob/master/lib/dom.js">文档对象模型</a> (DOM),
 <a href="https://github.com/facebook/flow/blob/master/lib/bom.js">浏览器对象模型</a> (BOM), 以及 <a href="https://github.com/facebook/flow/blob/master/lib/cssom.js">样式对象模型</a> (CSSOM)
 的类型</p>

<h2>Node.js<a id="nodejs" class="hashref"></a><a href="#nodejs" class="hash">#</a></h2>

<p>Flow 支持 <a href="https://github.com/facebook/flow/blob/master/lib/node.js">Node.js</a> 的类型</p>

<script>require(['inlineErrors'], function(inlineErrors) {
  inlineErrors.highlight([{"id":"E1","messages":[{"id":"M1001","description":"number","context":"(1 + 1: string); // Error: Numbers are not strings","source":"-","start":{"line":34,"column":2,"offset":966},"end":{"line":34,"column":6,"offset":971}},{"id":"M1002","description":"This type is incompatible with","context":null},{"id":"M1003","description":"string","context":"(1 + 1: string); // Error: Numbers are not strings","source":"-","start":{"line":34,"column":9,"offset":973},"end":{"line":34,"column":14,"offset":979}}],"operation":null},{"id":"E2","messages":[{"id":"M2001","description":"A","context":"(a: B); // Error: A is not a subclass of B","source":"-","start":{"line":42,"column":2,"offset":1173},"end":{"line":42,"column":2,"offset":1174}},{"id":"M2002","description":"This type is incompatible with","context":null},{"id":"M2003","description":"B","context":"(a: B); // Error: A is not a subclass of B","source":"-","start":{"line":42,"column":5,"offset":1176},"end":{"line":42,"column":5,"offset":1177}}],"operation":null},{"id":"E3","messages":[{"id":"M3001","description":"string","context":"(\"foo\": boolean); // strings are not booleans","source":"-","start":{"line":54,"column":2,"offset":1375},"end":{"line":54,"column":6,"offset":1380}},{"id":"M3002","description":"This type is incompatible with","context":null},{"id":"M3003","description":"boolean","context":"(\"foo\": boolean); // strings are not booleans","source":"-","start":{"line":54,"column":9,"offset":1382},"end":{"line":54,"column":15,"offset":1389}}],"operation":null},{"id":"E4","messages":[{"id":"M4001","description":"number","context":"takes_boolean(0); // Implicit casting is an error.","source":"-","start":{"line":65,"column":15,"offset":1736},"end":{"line":65,"column":15,"offset":1737}},{"id":"M4002","description":"This type is incompatible with","context":null},{"id":"M4003","description":"boolean","context":"function takes_boolean(x: boolean): void {}","source":"-","start":{"line":64,"column":27,"offset":1704},"end":{"line":64,"column":33,"offset":1711}}],"operation":{"description":"function call\n","context":"takes_boolean(0); // Implicit casting is an error.","source":"-","start":{"line":65,"column":1,"offset":1722},"end":{"line":65,"column":16,"offset":1738}}},{"id":"E5","messages":[{"id":"M5001","description":"boolean","context":"(true: Boolean);","source":"-","start":{"line":74,"column":2,"offset":2083},"end":{"line":74,"column":5,"offset":2087}},{"id":"M5002","description":"This type is incompatible with","context":null},{"id":"M5003","description":"Boolean","context":"(true: Boolean);","source":"-","start":{"line":74,"column":8,"offset":2089},"end":{"line":74,"column":14,"offset":2096}}],"operation":null},{"id":"E6","messages":[{"id":"M6001","description":"number","context":"(0: Number);","source":"-","start":{"line":95,"column":2,"offset":2617},"end":{"line":95,"column":2,"offset":2618}},{"id":"M6002","description":"This type is incompatible with","context":null},{"id":"M6003","description":"Number","context":"(0: Number);","source":"-","start":{"line":95,"column":5,"offset":2620},"end":{"line":95,"column":10,"offset":2626}}],"operation":null},{"id":"E7","messages":[{"id":"M7001","description":"string","context":"(\"foo\": String);","source":"-","start":{"line":119,"column":2,"offset":3184},"end":{"line":119,"column":6,"offset":3189}},{"id":"M7002","description":"This type is incompatible with","context":null},{"id":"M7003","description":"String","context":"(\"foo\": String);","source":"-","start":{"line":119,"column":9,"offset":3191},"end":{"line":119,"column":14,"offset":3197}}],"operation":null},{"id":"E8","messages":[{"id":"M8001","description":"null","context":"(null: void); // nope","source":"-","start":{"line":130,"column":2,"offset":3398},"end":{"line":130,"column":5,"offset":3402}},{"id":"M8002","description":"This type is incompatible with","context":null},{"id":"M8003","description":"undefined","context":"(null: void); // nope","source":"-","start":{"line":130,"column":8,"offset":3404},"end":{"line":130,"column":11,"offset":3408}}],"operation":null},{"id":"E9","messages":[{"id":"M9001","description":"undefined","context":"(undefined: null); // nope","source":"-","start":{"line":133,"column":2,"offset":3447},"end":{"line":133,"column":10,"offset":3456}},{"id":"M9002","description":"This type is incompatible with","context":null},{"id":"M9003","description":"null","context":"(undefined: null); // nope","source":"-","start":{"line":133,"column":13,"offset":3458},"end":{"line":133,"column":16,"offset":3462}}],"operation":null},{"id":"E10","messages":[{"id":"M10001","description":"null","context":"optional_fun(null); // null is not a string, nor void","source":"-","start":{"line":145,"column":14,"offset":3700},"end":{"line":145,"column":17,"offset":3704}},{"id":"M10002","description":"This type is incompatible with","context":null},{"id":"M10003","description":"string","context":"function optional_fun(foo?: string) {","source":"-","start":{"line":139,"column":29,"offset":3591},"end":{"line":139,"column":34,"offset":3597}}],"operation":{"description":"function call\n","context":"optional_fun(null); // null is not a string, nor void","source":"-","start":{"line":145,"column":1,"offset":3687},"end":{"line":145,"column":18,"offset":3705}}},{"id":"E11","messages":[{"id":"M11001","description":"null","context":"({foo: null}: optional_obj); // null is not a string, nor void","source":"-","start":{"line":151,"column":8,"offset":3870},"end":{"line":151,"column":11,"offset":3874}},{"id":"M11002","description":"This type is incompatible with","context":null},{"id":"M11003","description":"string","context":"type optional_obj = { foo?: string }","source":"-","start":{"line":147,"column":29,"offset":3770},"end":{"line":147,"column":34,"offset":3776}}],"operation":null},{"id":"E12","messages":[{"id":"M12001","description":"mixed","context":"(returns_mixed(): number);","source":"-","start":{"line":229,"column":2,"offset":6057},"end":{"line":229,"column":16,"offset":6072}},{"id":"M12002","description":"This type is incompatible with","context":null},{"id":"M12003","description":"number","context":"(returns_mixed(): number);","source":"-","start":{"line":229,"column":19,"offset":6074},"end":{"line":229,"column":24,"offset":6080}}],"operation":null},{"id":"E13","messages":[{"id":"M13001","description":"mixed","context":"(returns_mixed(): string);","source":"-","start":{"line":230,"column":2,"offset":6084},"end":{"line":230,"column":16,"offset":6099}},{"id":"M13002","description":"This type is incompatible with","context":null},{"id":"M13003","description":"string","context":"(returns_mixed(): string);","source":"-","start":{"line":230,"column":19,"offset":6101},"end":{"line":230,"column":24,"offset":6107}}],"operation":null},{"id":"E14","messages":[{"id":"M14001","description":"mixed","context":"(returns_mixed(): { foo: string });","source":"-","start":{"line":231,"column":2,"offset":6111},"end":{"line":231,"column":16,"offset":6126}},{"id":"M14002","description":"This type is incompatible with","context":null},{"id":"M14003","description":"object type","context":"(returns_mixed(): { foo: string });","source":"-","start":{"line":231,"column":19,"offset":6128},"end":{"line":231,"column":33,"offset":6143}}],"operation":null},{"id":"E15","messages":[{"id":"M15001","description":"string","context":"(\"bar\": \"foo\"); // `\"bar\"` is not exactly `\"foo\"`","source":"-","start":{"line":292,"column":2,"offset":7937},"end":{"line":292,"column":6,"offset":7942}},{"id":"M15002","description":"Expected string literal `foo`, got `bar` instead","context":null},{"id":"M15003","description":"string literal `foo`","context":"(\"bar\": \"foo\"); // `\"bar\"` is not exactly `\"foo\"`","source":"-","start":{"line":292,"column":9,"offset":7944},"end":{"line":292,"column":13,"offset":7949}}],"operation":null},{"id":"E16","messages":[{"id":"M16001","description":"string","context":"(\"fo\"+\"o\": \"foo\"); // even simple expressions lose literal information","source":"-","start":{"line":293,"column":2,"offset":7987},"end":{"line":293,"column":9,"offset":7995}},{"id":"M16002","description":"Expected string literal `foo`","context":null},{"id":"M16003","description":"string literal `foo`","context":"(\"fo\"+\"o\": \"foo\"); // even simple expressions lose literal information","source":"-","start":{"line":293,"column":12,"offset":7997},"end":{"line":293,"column":16,"offset":8002}}],"operation":null},{"id":"E17","messages":[{"id":"M17001","description":"number","context":"(2: 1); // `2` is not exactly `1`","source":"-","start":{"line":296,"column":2,"offset":8067},"end":{"line":296,"column":2,"offset":8068}},{"id":"M17002","description":"Expected number literal `1`, got `2` instead","context":null},{"id":"M17003","description":"number literal `1`","context":"(2: 1); // `2` is not exactly `1`","source":"-","start":{"line":296,"column":5,"offset":8070},"end":{"line":296,"column":5,"offset":8071}}],"operation":null},{"id":"E18","messages":[{"id":"M18001","description":"number","context":"(1+1: 2); // even simple expressions lose literal information","source":"-","start":{"line":297,"column":2,"offset":8101},"end":{"line":297,"column":4,"offset":8104}},{"id":"M18002","description":"Expected number literal `2`","context":null},{"id":"M18003","description":"number literal `2`","context":"(1+1: 2); // even simple expressions lose literal information","source":"-","start":{"line":297,"column":7,"offset":8106},"end":{"line":297,"column":7,"offset":8107}}],"operation":null},{"id":"E19","messages":[{"id":"M19001","description":"boolean","context":"(true: false); // `true` is not exactly `false`","source":"-","start":{"line":300,"column":2,"offset":8178},"end":{"line":300,"column":5,"offset":8182}},{"id":"M19002","description":"Expected boolean literal `false`, got `true` instead","context":null},{"id":"M19003","description":"boolean literal `false`","context":"(true: false); // `true` is not exactly `false`","source":"-","start":{"line":300,"column":8,"offset":8184},"end":{"line":300,"column":12,"offset":8189}}],"operation":null}]);
});</script>

    <p class="docs-prevnext">
      
        <a href="/flowtype/docs/quick-reference.html#_">&larr; Prev</a>
      
      
        <a class="right" href="/flowtype/docs/syntax.html#_">Next &rarr;</a>
      
    </p>

    <p class="edit-page-block">
      You can
      <a href="https://github.com/facebook/flow/tree/master/website/docs/ref/builtins.doc.js" target="_blank">
        edit this page on GitHub
      </a>
      and send us a pull request!
    </p>

    <a id="_"></a>
</article>

</div></section>

<footer><div class='width'>
    &copy; Copyright 2014 - 2016, Facebook Inc.
</div></footer>

<script>require(['default']);</script>
</body>
</html>

